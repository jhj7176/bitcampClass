<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">

var table, xhr;

window.onload=function(){
		table = document.querySelector("table");
		xhr = new XMLHttpRequest();
		xhr.onreadystatechange=function(){
			if(xhr.readyState==4&&xhr.status==200){
				var json = xhr.responseText;
				var obj = JSON.parse(json);
				var arr = obj.students;
				var msg = "<tr><th>학번</th><th>이름</th><th>수학</th><th>영어</th><th>수학</th></tr>";
				for (var i = 0; i < arr.length; i++) {
					msg+="<tr align='center'>";
					msg+="<td>"+arr[i].num+"</td>";
					msg+="<td>"+arr[i].name+"</td>";
					msg+="<td>"+arr[i].kor+"</td>";
					msg+="<td>"+arr[i].eng+"</td>";
					msg+="<td>"+arr[i].math+"</td>";
					msg+="</tr>";
				}//for
				table.innerHTML=msg;
			}//if
		};
		xhr.open('get','stujson');
		/* 주소창에 /stujson입력 >>서버에 요청>> 서버에서 StudentJson.java컴파일>서블릿수행>>
		
		>>DB table정보가 서블릿을 통해 json format으로 변환 >> 서버가 응답(table정보.json)을 클라이언트에 보냄>>
		
		>> ex04.html페이지에서 js수행 >> json형식 문서를 받아서 object형식으로 파싱함 >>
		
		>>obj의 students key value로 array형식의 학생정보를 꺼내서 arr에 대입. 
		
		>>for문을 이용해 학생들 개개인 정보를 key값으로 꺼내서 <tr><td> value </td></tr>에 넣고 msg에 저장
		
		>> html>body>table에 접근해서 innerHTML로 table내용을 msg로 채움 >> ex04.html페이지에 학생정보 테이블 출력완료.
		
			*/
		xhr.send();
}

</script>

</head>
<body>

	<h1>JSON</h1>
	<table/>

</body>
</html>